<!DOCTYPE html>
<html lang="en">
<head>
    	<meta charset="UTF-8">
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    	<title>Sample Site</title>


    <style>
	html {
		width: 100%;
	}
        body { 
		background:black;
		padding-top:50px;
		color:white;
		width: 100%;
		overflow: hidden;
	}
	#myChart {
		border-width: 1px;
		border-style: solid;
		border-color: Black;
	}
	.chart-container {
		position: relative;
    		width: 90vw;
    		height: 90vh;
	}
	.center {
		text-align: center;
	}
	.clock {
		font-size: 25vmin;
	}
	.date {
		font-size: 8vmin;
	}
	.temp {
		font-size: 8vmin;
	}
    </style>
</head>
<body>



	<div class="center">
  		        <div class="clock">			<span id="myClock"></span> </div>
		<br><br><div class="date" >			<span id="myDate"></span> </div>
		<br><br><div class="temp" >	Utetemp 	<span id="outdoors"></span> </div>
		<br><br><div class="temp" >	oled	 	<span id="oled"></span> </div>
	</div>



<script>
	// Things to adjust if required
	var UpdateInterval = 20 // Double number of seconds as we tick halfseconds

	// Internal variables
	var h ; var m ; var s
	var counter = 0
	var tick = 500



	function updateClock () {
		var dagar = ["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag" ]
		var today = new Date()
		h = today.getHours()
		m = today.getMinutes()
		s = today.getSeconds()
		month	= today.getMonth()
		day	= today.getDate()
		weekDay	= today.getDay()
		h = (h < 10) ? "0"+ h : h
		m = (m < 10) ? "0"+ m : m
		s = (s < 10) ? "0"+ s : s
		//document.getElementById('myClock').innerHTML = h+":"+m+":"+s
		document.getElementById('myClock').innerHTML = h+":"+m
		document.getElementById('myDate').innerHTML = dagar[weekDay ] + " " + day + "/" + (month + 1)
	}
	function update () {

		updateClock()
		/updateOled()

		// Outdoors
		//document.getElementById("outdoors").innerHTML = "-.-"
		xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.getElementById("outdoors").innerHTML = this.responseText
			}
		}
		xhttp.open("GET","api/number/temp/telldus/outdoors", true)
		xhttp.send()

	}
	/*
	function updateOled () {

		xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				let textArray = JSON.parse(this.responseText)
				let textHtml = ""
				for (let i = 0 ;  textArray.length;(i++) ) {
					text = textArray[1]
					console.log("In opdateOled. i is: "+i)
					textHtml = textHtml + "<br>" + textArray[1]
				}
				document.getElementById("oled").innerHTML = textHtml
			}
		}
		xhttp.open("GET","api/oled", true)
		xhttp.send()

	}
	*/

	function revolution() {
		if (counter++ === UpdateInterval) {
			counter=0
			update()
		}
		updateClock()
		
	}

	revolution () 

	
	window.onload = function() {
		setInterval( function() { revolution() }, tick)
		revolution()
		update()
	}


</script>




</body>
</html>

