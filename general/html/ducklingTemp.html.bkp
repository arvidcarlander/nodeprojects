<!DOCTYPE html>
<html lang="en">
<head>
    	<meta charset="UTF-8">
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    	<title>Sample Site</title>


    <style>
        body { padding-top:50px; }
	#myChart {
		border-width: 1px;
		border-style: solid;
		border-color: Black;
	}
	.chart-container {
		position: relative;
    		width: 90vw;
    		height: 90vh;
	}
	.center {
		text-align: center;
	}
	h1 {
		font-size: 60px;
	}
	button {
		font-size: 40px;
	}
    </style>
</head>
<body>



	<div class="center">
		<br><h1 >Duckling Temperature : 	<span id="DuckHeater">(...retrieving...)</span> </h1>
		<br><button id="refreshButton" type="button" onclick=handleStopButton()>Loading...</button>
	</div>



<script>
	function loadThisCPU () {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.getElementById("thiscpu").innerHTML = this.responseText
			}
		}
		xhttp.open("GET","api/number/temp/cpu", true)
		xhttp.send()
	}

	function loadAll () {

		document.getElementById("DuckHeater").innerHTML = "--.---"
		xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.getElementById("DuckHeater").innerHTML = this.responseText
			}
		}
		xhttp.open("GET","api/number/temp/w1/Duckling", true)
		xhttp.send()
	}

	loadAll () 

	
	let myInterval = null
	let myIntervalIsRunning = false

	window.onload = function() {
		startMyInterval()
	}

	function handleStopButton() {
				if (myIntervalIsRunning) {
					stopMyInterval()
				}else{
					startMyInterval()
				}
	}

	function startMyInterval() {
		loadAll()
		myInterval = setInterval( function() { loadAll() }, 10000)
		//alert("Starting...")
		myIntervalIsRunning = true
		document.getElementById("refreshButton").innerHTML = "Refreshing every 10 seconds. Click to stop"
	}
	function stopMyInterval() {
		//alert("Stopping...")
		clearInterval(myInterval)
		myIntervalIsRunning = false
		document.getElementById("refreshButton").innerHTML = "Start refreshing"
	}
</script>




</body>
</html>

